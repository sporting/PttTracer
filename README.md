# Trace ptt user's status with shell script

## How to install

0. 下載所有檔案到 home 目錄下的 expectptt

1. 請先建立以下目錄結構
 - `./expectptt/bin`  -->  bash 執行目錄，請將所有下載檔案放在這裡
 - `./expectptt/log`  -->  執行 ptt.sh 產生的暫存檔案
 - `./expectptt/log/daily`  -->  analptt.sh 整理過後的log file
 - `./expectptt/log/backfile`  -->  備份 ptt.sh 產生的暫存檔案

2. 修改 ptt.sh 變數
 - `[OWNER_NAME]` = linux 帳號
 - `[PTT_ACCOUNT]` = ptt 帳號
 - `[PTT_PASSWORD]` = ptt 密碼
 - `[PTT_QUERY_ACCOUNT]` = 欲查詢的 ptt 帳號

3. 檔案說明
 - `ptt.sh` 主要程序
 - `pttLoopQuery` 使用 `expect` 查詢 ptt 網友動態
 - `pttLoopQuery_big5` 透過 `ptt.sh` 自動將 `pttLoopQuery`(utf-8) 轉換成 big5 的格式
 - `analptt.sh` 將重複的動態去除，以便於分析

4. 使用方法
 - 將 `ptt.sh` 設上排程，每分鐘執行，`ptt.sh` 會判斷執行中則結束程序，不須擔心資源耗盡
 - 檢視 `./expectptt/log/daily` 的結果即可

輸出結果
<pre>
收集時間     動態        信箱狀態     上次登入時間      ip
 00:09:15	不在站上	最近無新信件	21:28:56	1.123.134.101
 07:57:14	主選單	   最近無新信件  07:43:09	   1.123.134.101
 08:10:14	不在站上	最近無新信件	07:43:09	1.123.134.101
 08:36:14	閱讀文章	最近無新信件	08:21:29	1.123.134.101
 08:36:14	不在站上	最近無新信件	08:21:29	1.123.134.101
 08:36:14	閱讀文章	最近無新信件	08:25:53	1.123.134.101
 09:42:15	閱讀文章	最近無新信件	08:56:38	163.66.242.31
 10:21:16	不在站上	最近無新信件	08:56:38	163.66.242.31
 10:21:16	閱讀文章	最近無新信件	08:56:38	163.66.242.31
 10:34:14	不在站上	最近無新信件	08:56:38	163.66.242.31
 10:47:16	閱讀文章	最近無新信件	08:56:38	163.66.242.31
 12:52:19	看板列表	最近無新信件	08:56:38	163.66.242.31
 12:52:19	不在站上	最近無新信件	08:56:38	163.66.242.31
 12:52:19	看板列表	最近無新信件	08:56:38	163.66.242.31
 12:52:19	閱讀文章	最近無新信件	08:56:38	163.66.242.31
 14:42:15	不在站上	最近無新信件	08:56:38	163.66.242.31
 14:55:15	閱讀文章	最近無新信件	08:56:38	163.66.242.31
 17:44:14	不在站上	最近無新信件	08:56:38	163.66.242.31
 20:46:20	閱讀文章	最近無新信件	20:23:59	1.123.134.101
 21:25:15	不在站上	最近無新信件	20:23:59	1.123.134.101
 21:38:15	閱讀文章	最近無新信件	20:23:59	1.123.134.201
</pre> 
ps. 為保護當事人，範例資料已經過處理
